{"numTotalTestSuites":32,"numPassedTestSuites":30,"numFailedTestSuites":2,"numPendingTestSuites":0,"numTotalTests":73,"numPassedTests":70,"numFailedTests":3,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1751125641348,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Auth Controller"],"fullName":"Auth Controller should sign up a new user","status":"passed","title":"should sign up a new user","duration":133.078708,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auth Controller"],"fullName":"Auth Controller should sign in the user and return an access token","status":"passed","title":"should sign in the user and return an access token","duration":116.82841599999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auth Controller"],"fullName":"Auth Controller should fail to sign in with wrong password","status":"passed","title":"should fail to sign in with wrong password","duration":98.0797500000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auth Controller"],"fullName":"Auth Controller should fail to access protected route without a token","status":"passed","title":"should fail to access protected route without a token","duration":2.5106250000001182,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auth Controller"],"fullName":"Auth Controller should access protected route with a valid token","status":"passed","title":"should access protected route with a valid token","duration":218.30354199999988,"failureMessages":[],"meta":{}}],"startTime":1751125642169,"endTime":1751125642737.3035,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/auth.test.ts"},{"assertionResults":[{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Analytics: should return 400 when no query is provided","status":"passed","title":"Analytics: should return 400 when no query is provided","duration":300.3978330000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Analytics: should return empty dataset for new user","status":"passed","title":"Analytics: should return empty dataset for new user","duration":320.3638329999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Profiles: should fail to create profile with invalid fields","status":"passed","title":"Profiles: should fail to create profile with invalid fields","duration":259.6618329999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Profiles: should return 404 for non-existing profile","status":"passed","title":"Profiles: should return 404 for non-existing profile","duration":153.66312500000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Profiles: should deny update of another user's profile","status":"passed","title":"Profiles: should deny update of another user's profile","duration":300.90212499999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Todos: should not create a todo with empty body","status":"passed","title":"Todos: should not create a todo with empty body","duration":150.63941699999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Todos: should return 404 when deleting non-existent todo","status":"passed","title":"Todos: should return 404 when deleting non-existent todo","duration":153.117209,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Todos: should return empty list for user with no todos","status":"passed","title":"Todos: should return empty list for user with no todos","duration":157.63195799999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage AnalyticsService: should return [] if no analytics data exists","status":"passed","title":"AnalyticsService: should return [] if no analytics data exists","duration":2.2066250000002583,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage ProfilesService: should throw error on duplicate profile creation","status":"passed","title":"ProfilesService: should throw error on duplicate profile creation","duration":2.3208749999998872,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage TodosService: should handle DB failure gracefully","status":"passed","title":"TodosService: should handle DB failure gracefully","duration":2.006582999999864,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage TodosService: should return todos sorted by createdAt desc","status":"passed","title":"TodosService: should return todos sorted by createdAt desc","duration":103.945291,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Auth: should reject expired token","status":"passed","title":"Auth: should reject expired token","duration":10.30712500000027,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Health: should return 200 for healthcheck","status":"passed","title":"Health: should return 200 for healthcheck","duration":6.838375000000269,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage AuthService: should reject login with wrong credentials","status":"passed","title":"AuthService: should reject login with wrong credentials","duration":2.76620899999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["Backend Extended Coverage"],"fullName":"Backend Extended Coverage Profiles: should return 200 for getting the current user's profile","status":"passed","title":"Profiles: should return 200 for getting the current user's profile","duration":152.90154200000006,"failureMessages":[],"meta":{}}],"startTime":1751125642171,"endTime":1751125644251.9016,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/backend.coverage.extended.test.ts"},{"assertionResults":[{"ancestorTitles":["Campaigns Routes"],"fullName":"Campaigns Routes GET /campaigns lista campañas","status":"passed","title":"GET /campaigns lista campañas","duration":13.484417000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["Campaigns Routes"],"fullName":"Campaigns Routes POST /campaigns crea campaña","status":"passed","title":"POST /campaigns crea campaña","duration":14.42979200000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Campaigns Routes"],"fullName":"Campaigns Routes POST /campaigns responde error si falta nombre","status":"passed","title":"POST /campaigns responde error si falta nombre","duration":1.7109159999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["Campaigns Routes"],"fullName":"Campaigns Routes DELETE /campaigns/:id elimina campaña","status":"passed","title":"DELETE /campaigns/:id elimina campaña","duration":2.79950000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["Campaigns Routes"],"fullName":"Campaigns Routes DELETE /campaigns/:id responde 404 si no existe","status":"passed","title":"DELETE /campaigns/:id responde 404 si no existe","duration":1.3711250000000064,"failureMessages":[],"meta":{}}],"startTime":1751125642168,"endTime":1751125642202.371,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/campaigns.routes.test.ts"},{"assertionResults":[{"ancestorTitles":["GET /health"],"fullName":"GET /health should respond with a 200 status and a health message","status":"passed","title":"should respond with a 200 status and a health message","duration":17.531458999999927,"failureMessages":[],"meta":{}}],"startTime":1751125642914,"endTime":1751125642931.5315,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/health.test.ts"},{"assertionResults":[{"ancestorTitles":["Onboarding Routes"],"fullName":"Onboarding Routes POST /onboarding/register responde con ok","status":"passed","title":"POST /onboarding/register responde con ok","duration":37.044583999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Routes"],"fullName":"Onboarding Routes POST /onboarding/register responde error si input inválido","status":"passed","title":"POST /onboarding/register responde error si input inválido","duration":3.193457999999964,"failureMessages":[],"meta":{}}],"startTime":1751125642865,"endTime":1751125642905.1934,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/onboarding.routes.test.ts"},{"assertionResults":[{"ancestorTitles":["OpenAI Routes"],"fullName":"OpenAI Routes POST /openai/prompt responde con answer","status":"passed","title":"POST /openai/prompt responde con answer","duration":17.725291999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["OpenAI Routes"],"fullName":"OpenAI Routes POST /openai/prompt responde error si prompt inválido","status":"passed","title":"POST /openai/prompt responde error si prompt inválido","duration":4.182541000000015,"failureMessages":[],"meta":{}}],"startTime":1751125642169,"endTime":1751125642191.1826,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/openai.routes.test.ts"},{"assertionResults":[{"ancestorTitles":["PostHog Routes"],"fullName":"PostHog Routes POST /posthog/event trackea un evento","status":"passed","title":"POST /posthog/event trackea un evento","duration":35.816959,"failureMessages":[],"meta":{}},{"ancestorTitles":["PostHog Routes"],"fullName":"PostHog Routes POST /posthog/event responde 400 si falta distinctId","status":"passed","title":"POST /posthog/event responde 400 si falta distinctId","duration":12.294166999999959,"failureMessages":[],"meta":{}}],"startTime":1751125642189,"endTime":1751125642237.2942,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/posthog.routes.test.ts"},{"assertionResults":[{"ancestorTitles":["PostHogService"],"fullName":"PostHogService no lanza error si no hay API key","status":"passed","title":"no lanza error si no hay API key","duration":0.9819999999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["PostHogService"],"fullName":"PostHogService llama a capture si hay cliente","status":"passed","title":"llama a capture si hay cliente","duration":0.06316599999999539,"failureMessages":[],"meta":{}},{"ancestorTitles":["PostHogService"],"fullName":"PostHogService llama a shutdown en flush si hay cliente","status":"passed","title":"llama a shutdown en flush si hay cliente","duration":0.04645800000000122,"failureMessages":[],"meta":{}}],"startTime":1751125642918,"endTime":1751125642919.0632,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/posthog.service.test.ts"},{"assertionResults":[{"ancestorTitles":["Reporting Routes"],"fullName":"Reporting Routes GET /reporting/usage devuelve un reporte de uso","status":"passed","title":"GET /reporting/usage devuelve un reporte de uso","duration":26.34104100000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reporting Routes"],"fullName":"Reporting Routes GET /reporting/usage responde error si el periodo no existe","status":"passed","title":"GET /reporting/usage responde error si el periodo no existe","duration":5.057083000000034,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reporting Routes"],"fullName":"Reporting Routes GET /reporting/event devuelve un reporte de evento","status":"passed","title":"GET /reporting/event devuelve un reporte de evento","duration":2.107666999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reporting Routes"],"fullName":"Reporting Routes GET /reporting/event responde error si el evento no existe","status":"passed","title":"GET /reporting/event responde error si el evento no existe","duration":1.3155419999999367,"failureMessages":[],"meta":{}},{"ancestorTitles":["Reporting Routes"],"fullName":"Reporting Routes GET /reporting/event responde error si el periodo no existe","status":"passed","title":"GET /reporting/event responde error si el periodo no existe","duration":2.5707909999999856,"failureMessages":[],"meta":{}}],"startTime":1751125642914,"endTime":1751125642950.5708,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/reporting.routes.test.ts"},{"assertionResults":[{"ancestorTitles":["Resend Routes"],"fullName":"Resend Routes POST /resend/email responde con ok","status":"passed","title":"POST /resend/email responde con ok","duration":17.987541999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["Resend Routes"],"fullName":"Resend Routes POST /resend/email responde error si input inválido","status":"passed","title":"POST /resend/email responde error si input inválido","duration":3.513541999999916,"failureMessages":[],"meta":{}}],"startTime":1751125642167,"endTime":1751125642188.5134,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/resend.routes.test.ts"},{"assertionResults":[{"ancestorTitles":["Runtime Routes"],"fullName":"Runtime Routes POST /runtime/jobs crea un job","status":"passed","title":"POST /runtime/jobs crea un job","duration":16.379374999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["Runtime Routes"],"fullName":"Runtime Routes GET /runtime/jobs lista jobs","status":"passed","title":"GET /runtime/jobs lista jobs","duration":2.576416999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["Runtime Routes"],"fullName":"Runtime Routes POST /runtime/jobs/:id/pause pausa un job","status":"passed","title":"POST /runtime/jobs/:id/pause pausa un job","duration":1.825040999999942,"failureMessages":[],"meta":{}},{"ancestorTitles":["Runtime Routes"],"fullName":"Runtime Routes POST /runtime/jobs/:id/resume reanuda un job","status":"passed","title":"POST /runtime/jobs/:id/resume reanuda un job","duration":3.950917000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Runtime Routes"],"fullName":"Runtime Routes POST /runtime/agents/:name/run lanza un agente","status":"passed","title":"POST /runtime/agents/:name/run lanza un agente","duration":2.238291000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Runtime Routes"],"fullName":"Runtime Routes POST /runtime/agents/:name/run responde error si el agente no existe","status":"passed","title":"POST /runtime/agents/:name/run responde error si el agente no existe","duration":1.7126250000000027,"failureMessages":[],"meta":{}},{"ancestorTitles":["Runtime Routes"],"fullName":"Runtime Routes DELETE /runtime/jobs/:id elimina un job","status":"passed","title":"DELETE /runtime/jobs/:id elimina un job","duration":1.4796249999999418,"failureMessages":[],"meta":{}},{"ancestorTitles":["Runtime Routes"],"fullName":"Runtime Routes POST /runtime/jobs responde error si falta id/schedule","status":"passed","title":"POST /runtime/jobs responde error si falta id/schedule","duration":4.119957999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Runtime Routes"],"fullName":"Runtime Routes POST /runtime/jobs/:id/pause responde 404 si no existe","status":"passed","title":"POST /runtime/jobs/:id/pause responde 404 si no existe","duration":1.764915999999971,"failureMessages":[],"meta":{}}],"startTime":1751125642170,"endTime":1751125642205.765,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/tests/runtime.routes.test.ts"},{"assertionResults":[{"ancestorTitles":["billingService"],"fullName":"billingService getAllInvoices retorna facturas para un cliente","status":"passed","title":"getAllInvoices retorna facturas para un cliente","duration":2.9197920000000295,"failureMessages":[],"meta":{}},{"ancestorTitles":["billingService"],"fullName":"billingService getAllInvoices retorna [] si fetch falla","status":"failed","title":"getAllInvoices retorna [] si fetch falla","duration":3.913833000000011,"failureMessages":["TypeError: res.text is not a function\n    at fetchInvoices (/Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/billing.service.ts:45:57)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"meta":{}},{"ancestorTitles":["billingService"],"fullName":"billingService getInvoiceById retorna una factura","status":"failed","title":"getInvoiceById retorna una factura","duration":1.4807500000000005,"failureMessages":["TypeError: data.filter is not a function\n    at fetchInvoices (/Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/billing.service.ts:47:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.getInvoiceById (/Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/billing.service.ts:56:22)\n    at /Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/__tests__/billing.service.test.ts:63:20\n    at file:///Users/jose/Proyectos/matriz_cursor/node_modules/.pnpm/@vitest+runner@3.2.4/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["billingService"],"fullName":"billingService getInvoiceById retorna null si fetch falla","status":"failed","title":"getInvoiceById retorna null si fetch falla","duration":0.45404199999995853,"failureMessages":["TypeError: res.text is not a function\n    at fetchInvoices (/Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/billing.service.ts:45:57)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.getInvoiceById (/Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/billing.service.ts:56:22)\n    at /Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/__tests__/billing.service.test.ts:69:20\n    at file:///Users/jose/Proyectos/matriz_cursor/node_modules/.pnpm/@vitest+runner@3.2.4/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["billingService"],"fullName":"billingService createInvoice crea una factura","status":"passed","title":"createInvoice crea una factura","duration":0.5045410000000174,"failureMessages":[],"meta":{}},{"ancestorTitles":["billingService"],"fullName":"billingService updateInvoice actualiza una factura","status":"passed","title":"updateInvoice actualiza una factura","duration":0.31024999999999636,"failureMessages":[],"meta":{}},{"ancestorTitles":["billingService"],"fullName":"billingService deleteInvoice elimina una factura","status":"passed","title":"deleteInvoice elimina una factura","duration":0.43379099999998516,"failureMessages":[],"meta":{}}],"startTime":1751125641645,"endTime":1751125641655.4338,"status":"failed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/__tests__/billing.service.test.ts"},{"assertionResults":[{"ancestorTitles":["logAction"],"fullName":"logAction logea acción y llama a PostHog","status":"passed","title":"logea acción y llama a PostHog","duration":2.1140419999999835,"failureMessages":[],"meta":{}},{"ancestorTitles":["logAction"],"fullName":"logAction logea acción sin detalles","status":"passed","title":"logea acción sin detalles","duration":0.26358300000003965,"failureMessages":[],"meta":{}},{"ancestorTitles":["logAction"],"fullName":"logAction lanza error si falta userId","status":"passed","title":"lanza error si falta userId","duration":1.3649169999999913,"failureMessages":[],"meta":{}}],"startTime":1751125642688,"endTime":1751125642692.365,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/__tests__/logger.service.test.ts"},{"assertionResults":[{"ancestorTitles":["OpenAIService"],"fullName":"OpenAIService devuelve respuesta simulada","status":"passed","title":"devuelve respuesta simulada","duration":58.16620800000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["OpenAIService"],"fullName":"OpenAIService lanza error si falta API key","status":"passed","title":"lanza error si falta API key","duration":1.7595420000000104,"failureMessages":[],"meta":{}},{"ancestorTitles":["OpenAIService"],"fullName":"OpenAIService lanza error si la API falla","status":"passed","title":"lanza error si la API falla","duration":0.2625829999999496,"failureMessages":[],"meta":{}}],"startTime":1751125641621,"endTime":1751125641681.7595,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/__tests__/openai.service.test.ts"},{"assertionResults":[{"ancestorTitles":["ResendService"],"fullName":"ResendService envía email exitosamente","status":"passed","title":"envía email exitosamente","duration":1.59970899999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResendService"],"fullName":"ResendService lanza error si falla el envío","status":"passed","title":"lanza error si falla el envío","duration":0.7804999999999893,"failureMessages":[],"meta":{}}],"startTime":1751125642805,"endTime":1751125642807.7805,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/__tests__/resend.service.test.ts"},{"assertionResults":[{"ancestorTitles":["RuntimeService"],"fullName":"RuntimeService crea un job nuevo","status":"passed","title":"crea un job nuevo","duration":8.231291999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["RuntimeService"],"fullName":"RuntimeService lanza error si el job ya existe","status":"passed","title":"lanza error si el job ya existe","duration":7.04929199999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["RuntimeService"],"fullName":"RuntimeService lista jobs","status":"passed","title":"lista jobs","duration":7.698791999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["RuntimeService"],"fullName":"RuntimeService pausa, reanuda y elimina job","status":"passed","title":"pausa, reanuda y elimina job","duration":4.501500000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["RuntimeService"],"fullName":"RuntimeService runAgent éxito","status":"passed","title":"runAgent éxito","duration":5.627624999999966,"failureMessages":[],"meta":{}},{"ancestorTitles":["RuntimeService"],"fullName":"RuntimeService runAgent error por agente no registrado","status":"passed","title":"runAgent error por agente no registrado","duration":7.931500000000028,"failureMessages":[],"meta":{}}],"startTime":1751125642470,"endTime":1751125642511.9314,"status":"passed","message":"","name":"/Users/jose/Proyectos/matriz_cursor/apps/backend/src/services/__tests__/runtime.service.test.ts"}]}