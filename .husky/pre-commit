#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "🚀 STRATO Pre-commit Hook - Validando calidad del código..."

# 1. Sincronizar módulos
echo "📦 Sincronizando módulos..."
pnpm tsx scripts/sync-modules-index.ts

# 2. Linting y formato automático
echo "🔍 Ejecutando lint-staged..."
pnpm lint-staged

# 3. Validaciones personalizadas
echo "🔧 Ejecutando validaciones personalizadas..."
pnpm tsx scripts/pre-commit-validation.ts

# 4. Context watchdog
echo "👁️ Ejecutando context watchdog..."
pnpm tsx scripts/agents/context-watchdog.ts

echo "✅ Pre-commit hook completado exitosamente!"
