#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "🚀 STRATO Pre-commit Hook - Validando calidad del código..."

# 1. Linting y formato automático (solo warnings)
echo "🔍 Ejecutando lint-staged..."
pnpm lint-staged || echo "⚠️  Linting encontró problemas (continuando...)"

# 2. Validaciones personalizadas (solo warnings)
echo "🔧 Ejecutando validaciones personalizadas..."
pnpm tsx scripts/pre-commit-validation.ts || echo "⚠️  Validaciones encontraron problemas (continuando...)"

# 3. Context watchdog (solo warnings)
echo "👁️ Ejecutando context watchdog..."
pnpm tsx scripts/agents/context-watchdog.ts || echo "⚠️  Context watchdog encontró problemas (continuando...)"

echo "✅ Pre-commit hook completado (warnings permitidos)!"
