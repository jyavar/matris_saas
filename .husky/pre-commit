#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸš€ STRATO Pre-commit Hook - Validando calidad del cÃ³digo..."

# 1. Sincronizar mÃ³dulos
echo "ğŸ“¦ Sincronizando mÃ³dulos..."
pnpm tsx scripts/sync-modules-index.ts

# 2. ValidaciÃ³n de trazabilidad (BLINDAJE)
echo "ğŸ›¡ï¸ Validando blindaje de trazabilidad..."
pnpm validate-traceability

# 3. Linting y formato automÃ¡tico
echo "ğŸ” Ejecutando lint-staged..."
pnpm lint-staged

# 4. Validaciones personalizadas
echo "ğŸ”§ Ejecutando validaciones personalizadas..."
pnpm tsx scripts/pre-commit-validation.ts

# 5. Context watchdog
echo "ğŸ‘ï¸ Ejecutando context watchdog..."
pnpm tsx scripts/agents/context-watchdog.ts

echo "âœ… Pre-commit hook completado exitosamente!"
